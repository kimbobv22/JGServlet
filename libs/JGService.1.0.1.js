(function(b){if($==undefined||$==null){console.error("can't not initialize JGService, JQuery not found");return;}if(JGDataset==undefined||JGDataset==null){console.error("can't not initialize JGService, JGDataset not found");return;}var a=(function(){});a.prototype.formToJSON=(function(e){var f={};var g=e.serializeArray();$.each(g,function(){if(f[this.name]){if(!f[this.name].push){f[this.name]=[f[this.name]];}f[this.name].push(this.value||"");}else{f[this.name]=this.value||"";}});return f;});a.prototype.JSONToForm=(function(j,e){var h=$(document.createElement("form"));j=Object.NVL(j,{});if(!Object.isNull(e)){if(!Object.isNull(e.enctype)){h.attr("enctype",e.enctype);}if(!Object.isNull(e.method)){h.attr("method",e.method);}else{h.method="post";}if(!Object.isNull(e.action)){h.attr("action",e.action);}}for(var g in j){if(j.hasOwnProperty(g)){var f=$(document.createElement("input"));f.attr("type","hidden");f.attr("name",g);f.attr("value",j[g]);h.append(f);}}return h;});a.prototype.countProperties=(function(g){var e=0;for(var f in g){if(g.hasOwnProperty(f)){++e;}}return e;});a._mobileCheckMetaData={android:function(){return navigator.userAgent.match(/Android/i);},blackberry:function(){return navigator.userAgent.match(/BlackBerry/i);},ios:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i);},opera:function(){return navigator.userAgent.match(/Opera Mini/i);},windows:function(){return navigator.userAgent.match(/IEMobile/i);},any:function(){return(a._mobileCheckMetaData.android()||a._mobileCheckMetaData.blackberry()||a._mobileCheckMetaData.ios()||a._mobileCheckMetaData.opera()||a._mobileCheckMetaData.windows());}};a.prototype.checkMobile=(function(e){e=Object.NVL(e,"any").toLowerCase();var f=a._mobileCheckMetaData[e];if(!Object.isNull(f)){return f();}else{return undefined;}});a.prototype.hasClicked=(function(f,e){var g=$(f);return(g.is(e.target)||g.has(e.target).length>0);});var d=(function(){});d.prototype._requestURLs={};d.prototype.putRequestURL=(function(e,f){d.prototype._requestURLs[e]=f;});d.prototype.requestURL=(function(g,f){var e=d.prototype._requestURLs[g];if(!Object.isNull(f)){e+=(e.indexOf("?")<0?"?":"&")+$.param(f);}return e;});d.prototype.ajax=(function(e,f){f=$.extend($.extend({},f),{type:"POST",url:this.requestURL(e)});$.ajax(f);});d.prototype.submitForm=(function(e){document.body.appendChild(e);e.submit();document.body.removeChild(e);});d.prototype.postToURL=(function(g,h,f){var e=a.JSONToForm(h,f);e.method="POST";e.action=g;this.submitForm(e);});d.prototype.postToService=(function(f,g,e){this.postToURL(this.requestURL(f),g,e);});d.prototype.forwardURL=(function(e){b.location.href=e;});d.prototype.forwardService=(function(e,f){this.forwardURL(this.requestURL(e,f));});d.prototype.fileDownload=(function(e,g){var f={workType:"get",path:g.path};f.resizeRatio=g.resizeRatio;f.resizeWidth=g.resizeWidth;f.resizeHeight=g.resizeHeight;if(!Object.isNull(g.mimeType)){f.mimeType=g.mimeType;}this.forwardService(e,f);});d.prototype.fileDelete=(function(e,g){var f={method:"GET",success:function(h){if(h.result==0){if(!Object.isNull(g.success)){g.success(h.message);}}else{if(!Object.isNull(g.fail)){g.fail(h.result,h.message);}}},error:function(j,k,h){if(!Object.isNull(g.error)){g.error(j,k,h);}}};f.data={workType:"del",path:g.path};this.ajax(e,f);});d.prototype.getFile=(function(e,f){f=$.extend({multiple:false,accept:"*/*"},f);$("input[type='file'][jgmodule-common-file-input]").remove();fileInput_=$("<input type='file' jgmodule-common-file-input style='display:none;'/>");$(document.body).append(fileInput_);fileInput_.attr("multiple",f.multiple);fileInput_.attr("accept",f.accept);fileInput_.change(function(){e(this);});fileInput_.click();});d.prototype.fileUpload=(function(f,k,j){k=$.extend({},k);var h=new FormData();h.append("path",k.path);if(Object.isNull(j)){var e=this;this.getFile(function(l){e.fileUpload(f,k,l);},k);return;}else{$.each($(j).get(0).files,function(m,l){h.append("file-"+m,l);});}this.ajax(f,{data:h,processData:false,contentType:false,success:function(l){if(l.result==0){if(!Object.isNull(k.success)){k.success(l.message);}}else{if(!Object.isNull(k.fail)){k.fail(l.result,l.message);}}},error:function(m,n,l){if(!Object.isNull(k.error)){k.error(reponse_,n,l);}}});if(!Object.isNull(k.progress)){var e=this;var g=null;g=setInterval(function(){e._fileUploadProgress(f,{success:function(l){k.progress(l.currentIndex,l.bytesRead,l.totalLength);},fail:function(){clearInterval(g);},error:function(m,n,l){clearInterval(g);if(!Object.isNull(k.error)){k.error(reponse_,n,l);}}});},Object.NVL(k.progressCheckDelay,500));}});d.prototype._fileUploadProgress=(function(e,f){this.ajax(e,{data:{workType:"prg"},method:"GET",success:function(g){if(g.result==0){if(!Object.isNull(f.success)){f.success(g.message);}}else{if(!Object.isNull(f.fail)){f.fail();}}},error:function(h,j,g){if(!Object.isNull(f.error)){f.error(reponse_,j,g);}}});});var c=(function(){});c.prototype.getCookieVal=(function(e){var f=document.cookie.indexOf(";",e);if(f==-1){f=document.cookie.length;}return unescape(document.cookie.substring(e,f));});c.prototype.getCookie=(function(h){var f=h+"=";var e=f.length;var k=document.cookie.length;var j=0;while(j<k){var g=j+e;if(document.cookie.substring(j,g)==f){return getCookieVal(g);}j=document.cookie.indexOf(" ",j)+1;if(i==0){break;}}return null;});c.prototype.putCookie=(function(h,f){var e=arguments.length;var g=(2<e)?arguments[2]:null;var j=(3<e)?arguments[3]:null;var l=(4<e)?arguments[4]:null;var k=(5<e)?arguments[5]:false;document.cookie=h+"="+escape(f)+((g==null)?"":("; expires="+g.toGMTString()))+((j==null)?"":("; path="+j))+((l==null)?"":("; domain="+l))+((k==true)?"; secure":"");});d.prototype.makeServiceKey=(function(e,g,f){return $.extend({srvMap:e,srvID:g},f);});d.prototype.cookie=new c();b.JGUtils=new a();b.JGModule=new d();})(window);