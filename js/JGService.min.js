!function(e){if(void 0===$)return void console.error("can't not initialize JGService, JQuery not found");if(void 0===JGDataset)return void console.error("can't not initialize JGService, JGDataset not found");var t=e.JGService={_requestURLs:{},requestURL:function(e,t){var n=null,i=null,r=null;if(void 0===this._requestURLs[e]){if("string"===$.type(t)){var a=t.lastIndexOf("/");return a===t.length-1&&(t=t.substring(0,a)),this._requestURLs[e]=t,this._requestURLs[e]}return void console.error("request URL must be String")}"object"===$.type(t)&&(n=t.appendPath,i=t.parameters,r=t.mappingData);var o=this._requestURLs[e];if(!isNull(n)){var u=n.indexOf("/");0!=u&&(n="/"+n);var a=n.lastIndexOf("/");a===n.length-1&&(n=n.substring(0,a)),o+=n}return isNull(r)||$.each(r,function(e,t){var n=new RegExp("\\{"+e+"\\}");n.test(o)&&(o=o.replace(n,t))}),isNull(i)||(o+=(o.indexOf("?")<0?"?":"&")+$.param(i)),o},ajax:function(e,t,n){var i,r;void 0===n?(r=t,i=null):(i=t,r=n),delete i.parameters;var a=this.requestURL(e,i);r=$.extend($.extend({type:"POST",contentType:"application/x-www-form-urlencoded; charset=UTF-8"},r),{url:a}),$.ajax(r)},postService:function(e,t){var n=$.extend({},t.parameters);delete t.parameters;var i=$("<form />");i.hide(),i.attr("method","POST"),i.attr("action",this.requestURL(e,t)),$.each(n,function(e,t){$("<input type='hidden' />").attr("name",e).attr("value",t).appendTo(i)}),$(document.body).append(i),i.submit(),i.remove()},forwardService:function(t,n){e.location.href=this.requestURL(t,n)},getFile:function(e,t){return t=$.extend({multiple:!1,accept:"*/*"},t),$("input[type='file'][jgmodule-common-file-input]").remove(),fileInput_=$("<input type='file' jgmodule-common-file-input style='display:none;'/>"),$(document.body).append(fileInput_),fileInput_.attr("multiple",t.multiple),fileInput_.attr("accept",t.accept),fileInput_.change(function(){e(this)}),fileInput_.click(),fileInput_},sendMultipart:function(e,t,n,i){if(isNull(i)){var r=this;return void this.getFile(function(i){r.sendMultipart(e,t,n,i)},n)}n=$.extend({async:!1},n);var a=$.extend({},t.parameters);delete t.parameters;var o=this.requestURL(e,t),u=new FormData;$.each(a,function(e,t){u.append(e,t)});var l=0;void 0===i.length&&(i=$(i));for(var s=i.length,c=0;s>c;++c)$.each(i[c].files,function(e,t){u.append("file-"+l,t),++l});n=$.extend(n,{type:"POST",contentType:"application/x-www-form-urlencoded; charset=UTF-8",url:o,data:u,cache:!1,contentType:!1,processData:!1,async:!0}),$.ajax(n)},cookie:function(e,t,n){if(void 0===t){e+="=";var i=document.cookie,r=i.indexOf(e);if(-1!==r){r+=e.length;var a=i.indexOf(";",r);return-1===a&&(a=i.length),unescape(i.substring(r,a))}return null}if(null===t)return void this.removeCookie(e);var o=e+"="+escape(t)+";path=/;",u=new Date;"string"==typeof n?u=new Date(n):"number"==typeof n&&u.setDate(u.getDate()+u),o+="expires="+u.toGMTString()+";",document.cookie=o},removeCookie:function(e){document.cookie=e+"=;expires=Thu, 01 Jan 1970 00:00:01 GMT; path=/;"}};return t}(window);